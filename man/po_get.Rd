% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simplified_api.R
\name{po_get}
\alias{po_get}
\title{Smart getter for Peru open data}
\usage{
po_get(
  identifier,
  what = c("data", "info", "all"),
  format = NULL,
  clean_names = TRUE,
  save_to = NULL,
  encoding = c("UTF-8", "Latin1", "Windows-1252", "ISO-8859-1", "auto"),
  verbose = TRUE
)
}
\arguments{
\item{identifier}{Dataset name, dataset ID, resource ID(s), or tibble of resources}

\item{what}{What to get: "data" (default), "info", or "all"}

\item{format}{Preferred format when multiple are available (e.g., "CSV", "XLSX")}

\item{clean_names}{Logical. Clean column names for R compatibility (default TRUE)}

\item{save_to}{Directory path to save downloaded files (default NULL = no saving)}

\item{encoding}{Character encoding: "UTF-8" (default), "Latin1", "Windows-1252", "ISO-8859-1", or "auto"}

\item{verbose}{Logical. Show download progress (default TRUE)}
}
\value{
Depending on input:
\describe{
\item{Single resource}{A data.frame/tibble or metadata depending on 'what'}
\item{Multiple resources}{A named list of data/metadata for each resource}
\item{Dataset}{Data/metadata from the best available resource}
}
}
\description{
Intelligently fetches data or metadata based on the identifier(s) provided.
Works with dataset names, dataset IDs, resource IDs, or tibbles from po_catalog/po_search.
}
\examples{
\dontrun{
# Get data using dataset name
malaria <- po_get("malaria-2024")

# Get metadata only
info <- po_get("malaria-2024", what = "info")

# Get specific resource by ID
data <- po_get("abc-123-resource-id")

# Get multiple resources
resources <- po_get(c("resource-id-1", "resource-id-2"))

# Get resources from catalog/search results
catalog <- po_catalog()
csv_resources <- catalog$resources \%>\% filter(format == "CSV")
all_csv_data <- po_get(csv_resources)

# Save files locally with original names
data <- po_get("dataset-name", save_to = "data/peru/")

# Force specific encoding for Spanish characters
data <- po_get("resource-id", encoding = "Windows-1252")
data <- po_get("resource-id", encoding = "ISO-8859-1")
}
}
